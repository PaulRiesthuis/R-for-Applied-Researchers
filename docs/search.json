[
  {
    "objectID": "chapter5.html",
    "href": "chapter5.html",
    "title": "5  Multilevel data",
    "section": "",
    "text": "6 Dataset\nIn the previous chapter, we worked with a real dataset and performed standard statistical analyses such as t-tests and reliability analyses. However, many real-world datasets contain nested or clustered data structures. This becomes especially relevant when we want to address questions about individual differences as we discussed in a previous meting. In this chapter, we take the next step: working with multilevel data in R.\nIn our example, legal professionals evaluated multiple scenarios. This means that each participant contributed multiple responses. The data are therefore not independent — responses are nested within individuals.\nBy the end of this chapter, you will be able to:\nThese skills are essential when working with repeated measures, longitudinal designs, educational data, or any structure where observations are grouped within higher-level units.\nIn this example, we use data from a study among legal professionals in Belgium and the Netherlands. Participants evaluated three different scenarios, each consisting of six items measuring memory errors. Download the dataset here (download dataset here\nBecause each participant responded to multiple items across multiple scenarios, the dataset has a two-level structure:\nThis nested structure requires multilevel modeling.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#create-participant-column",
    "href": "chapter5.html#create-participant-column",
    "title": "5  Multilevel data",
    "section": "9.1 Create participant column",
    "text": "9.1 Create participant column\n\ndat_original$participants &lt;- seq(1,nrow(dat_original),1)",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#rename-question-columns-to-x1-x18",
    "href": "chapter5.html#rename-question-columns-to-x1-x18",
    "title": "5  Multilevel data",
    "section": "9.2 Rename question columns to x1-x18",
    "text": "9.2 Rename question columns to x1-x18\n\ndat_analysis &lt;- dat_original %&gt;%\n  rename_with(\n    ~ paste0(\"x\", 1:18),\n    .cols = 29:46\n  )",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#rename-country-column",
    "href": "chapter5.html#rename-country-column",
    "title": "5  Multilevel data",
    "section": "9.3 Rename country column",
    "text": "9.3 Rename country column\n\ndat_analysis &lt;- dat_analysis %&gt;% \n  mutate(Country = case_when(`List of Countries...28` == \"Netherlands\" ~ \"NL\",\n                      `List of Countries...28`  == \"Belgium\" ~ \"BE\",\n                      `List of Countries...28`  == \"United States of America\" ~ \"USA\",\n                      TRUE ~ \"Other\"))",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#rename-occupation-column",
    "href": "chapter5.html#rename-occupation-column",
    "title": "5  Multilevel data",
    "section": "9.4 Rename occupation column",
    "text": "9.4 Rename occupation column\n\nsetnames(dat_analysis, old = \"Wat is uw huidige beroep? - Selected Choice\", new =  \"Occupation\")",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#recode-never-12-responses-to-na",
    "href": "chapter5.html#recode-never-12-responses-to-na",
    "title": "5  Multilevel data",
    "section": "9.5 Recode “never” (=12) responses to NA",
    "text": "9.5 Recode “never” (=12) responses to NA\n\ndat_analysis &lt;- dat_analysis %&gt;% \n  mutate_at(c(\"x1\",\"x2\",\"x3\",\"x4\",\"x5\",\"x6\",\"x7\",\"x8\",\"x9\",\"x10\",\"x11\",\"x12\",\"x13\",\"x14\",\"x15\",\"x16\",\"x17\",\"x18\"), ~replace_na(., 12)) # this is to make the option \"never\" in analyzable variable.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#keep-relevant-participants",
    "href": "chapter5.html#keep-relevant-participants",
    "title": "5  Multilevel data",
    "section": "9.6 Keep Relevant Participants",
    "text": "9.6 Keep Relevant Participants\n\n9.6.1 Step 1: Keep participants who completed at least one scenario\n\ndat_analysis &lt;- dat_analysis %&gt;%\n  filter(Progress &gt;= 49)\n\n\n\n9.6.2 Step 2: Keep participants from Belgium or the Netherlands\n\ndat_analysis &lt;- dat_analysis %&gt;%\n  filter(Country %in% c(\"NL\", \"BE\"))\n\n\n\n9.6.3 Step 3: Logical age-work consistency\n\ndat_analysis &lt;- dat_analysis %&gt;%\n  filter(`Leeftijd (in jaren)` - `Hoeveel jaren werkt u ongeveer al in het rechtssysteem?` &gt; 18)\n\n\n\n9.6.4 Step 4: Judges must have at least 5 years of experience\n\ndat_analysis &lt;- dat_analysis %&gt;%\n  filter(!(Occupation == \"Rechter\" & `Hoeveel jaren werkt u ongeveer al in het rechtssysteem?` &lt; 5))\n\n\n\n9.6.5 Step 5: Minimum survey duration\n\ndat_analysis &lt;- dat_analysis %&gt;%\n  filter(`Duration (in seconds)` &gt; 300)\n\nThis leaves us with 69 participants just as in the original article.\n\nnrow(dat_analysis)\n\n[1] 69",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#create-dataset-for-analysis",
    "href": "chapter5.html#create-dataset-for-analysis",
    "title": "5  Multilevel data",
    "section": "9.7 Create dataset for analysis",
    "text": "9.7 Create dataset for analysis\n\ndat_analysis_wide &lt;- dat_analysis %&gt;%\n  select(\n    participants,\n    Country,\n    starts_with(\"x\")\n  )\n\nhead(dat_analysis_wide)\n\n  participants Country   x1   x2   x3   x4   x5   x6   x7   x8   x9  x10  x11\n1            1      BE  1.5  1.6  1.2  0.6  1.5  0.0  2.0  2.3  2.5  2.2 12.0\n2            2      NL  3.3  6.6  1.6 12.0 12.0 12.0  2.1  2.2  1.3 12.0  3.5\n3            3      NL  2.9  2.9  6.1  5.0 12.0  3.9  0.9  0.9  3.0  2.9 12.0\n4            4      NL 12.0  2.9  3.0 12.0  1.4  5.0  2.4  2.6  4.1  4.0  3.0\n5            5      NL  0.8  0.7  1.0  1.9  1.0  0.8  1.8  1.8  2.9 12.0  0.8\n6            7      NL 12.0 12.0 12.0 12.0 12.0 12.0 10.0 12.0 12.0 12.0 12.0\n   x12 x13  x14 x15  x16  x17  x18\n1  4.9 0.9  0.8 1.0  0.0  1.6  0.0\n2 12.0 0.7  0.7 0.7  7.0  2.9  3.8\n3  1.8 2.5  1.0 3.0  2.9 12.0  2.9\n4  5.5 0.9  0.8 0.9  0.8  0.9  0.9\n5  2.0 0.8  1.9 1.8 12.0  0.9  1.9\n6  2.9 4.3 12.0 1.3 12.0  6.8 10.0",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#convert-to-long-format",
    "href": "chapter5.html#convert-to-long-format",
    "title": "5  Multilevel data",
    "section": "10.1 Convert to Long Format",
    "text": "10.1 Convert to Long Format\nWe use pivot_longer():\n\ndat_analysis_long &lt;- dat_analysis_wide %&gt;%\n  pivot_longer(\n    cols = starts_with(\"x\"),\n    names_to = \"Questions\",\n    values_to = \"Memory_errors\"\n  )\n\nNow, each participant contributes 18 rows — one per question.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#create-scenario-variable",
    "href": "chapter5.html#create-scenario-variable",
    "title": "5  Multilevel data",
    "section": "10.2 Create Scenario Variable",
    "text": "10.2 Create Scenario Variable\nEach scenario contains six items: - x1–x6 → Scenario 1 - x7–x12 → Scenario 2 - x13–x18 → Scenario 3\n\n# Create grouping variable for scenario\ndat_analysis_long &lt;- dat_analysis_long %&gt;%\n  mutate(Scenario = ifelse(Questions == \"x1\", \"scen1\",\n                    ifelse(Questions == \"x2\", \"scen1\",\n                    ifelse(Questions == \"x3\", \"scen1\",\n                    ifelse(Questions == \"x4\", \"scen1\",\n                    ifelse(Questions == \"x5\", \"scen1\",\n                    ifelse(Questions == \"x6\", \"scen1\",\n                    ifelse(Questions == \"x7\", \"scen2\",\n                    ifelse(Questions == \"x8\", \"scen2\",\n                    ifelse(Questions == \"x9\", \"scen2\",\n                    ifelse(Questions == \"x10\", \"scen2\",\n                    ifelse(Questions == \"x11\", \"scen2\",\n                    ifelse(Questions == \"x12\", \"scen2\",\n                    \"scen3\")))))))))))))",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#set-scenario-as-factor-and-set-reference-group",
    "href": "chapter5.html#set-scenario-as-factor-and-set-reference-group",
    "title": "5  Multilevel data",
    "section": "10.3 Set scenario as factor and set reference group",
    "text": "10.3 Set scenario as factor and set reference group\n\ndat_analysis_long$Scenario &lt;- as.factor(dat_analysis_long$Scenario)\ndat_analysis_long$Scenario  &lt;- relevel(dat_analysis_long$Scenario , ref = \"scen2\")",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  },
  {
    "objectID": "chapter5.html#plot-the-model-with-flexplot",
    "href": "chapter5.html#plot-the-model-with-flexplot",
    "title": "5  Multilevel data",
    "section": "13.1 plot the model with Flexplot",
    "text": "13.1 plot the model with Flexplot\n\nvisualize(model1,\n          sample = 69)",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Multilevel data</span>"
    ]
  }
]