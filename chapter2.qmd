# Packages {#sec-packages}

In the previous chapter, we explored the RStudio interface, learned how to write and run simple pieces of R code, and practiced creating and manipulating basic data structures such as vectors and data frames. These skills form the foundation for working in R.

In this chapter, we take the next step: we will learn how to **install packages**, **load them**, and **use them in your analyses**. Packages are essential in R because they extend the functionality of the language and make data manipulation, visualization, and analysis much easier.

By the end of this chapter, you will be able to:

-   Install and load R packages

-   Navigate packages and explore their functions

-   Get help and documentation for packages

The skills you learn here will be applied throughout the rest of the book, as you work with more complex datasets and analyses.

## Installing and loading packages {#sec-installing-and-loading-packages}

Base R already includes many useful functions, such as creating variables, working with vectors, and building data frames. However, much of R’s power comes from the thousands of **additional packages** created by researchers and developers. These packages make tasks like data manipulation, visualization, modeling, or reporting much easier.

Earlier, we briefly introduced the **`dplyr`** package for data manipulation. Let’s now formally look at how to install and load packages.

### Installing a package from CRAN

CRAN (the Comprehensive R Archive Network) is the main place where R packages are stored. To install a package from CRAN, you run:

```{r, eval=F}
install.packages("dplyr")
```

-   You only need to install a package **once** on your computer (unless you update or reinstall R).

## Installing packages from GitHub

Not all packages are available on CRAN. Many developers share their newest or experimental work on **GitHub**. To install these packages, you first need the `devtools` package.

### Step 1: Install and load devtools

```{r,  eval=F}
install.packages("devtools") 
library(devtools) 
```

### Step 2: Install a package from GitHub

The syntax is:

```{r,  eval=F}
devtools::install_github("username/repository") 
```

For example, I created a package called *ROCpower* and uploaded it to GitHub, you could install it like this

```{r,  eval=F}
devtools::install_github("PaulRiesthuis/ROCpower")
```

GitHub installations are useful when:

-   a package is very new

-   a feature is only available in the development version

-   or the author hasn’t uploaded it to CRAN yet

## Loading a package

After installation, you need to *load* the package each time you start a new R session:

```{r, message = F}
library(dplyr)
```

Once a package is loaded, all of its functions become available for use. @riesthuis_simulation-based_2024

## Using a package

Once a package is loaded with `library()`, you can immediately start using its functions. Most packages are organized around a specific purpose. Some of the most used packages are:

### Data manipulation and cleaning

-   **dplyr** – grammar of data manipulation (filtering, selecting, grouping)
-   **tidyr** – reshaping and organizing data (pivoting, separating, unnesting)
-   **stringr** – working with text data (string detection, replacement, cleaning)
-   **tidyverse** – Loading `tidyverse` loads `dplyr`, `tidyr`, `stringr`, and other core packages at once.

### Data importing

-   **readr** – fast reading of CSV and text files
-   **readxl** – import Excel files (e.g., `.xls` and `.xlsx`)
-   **haven** – import SPSS, Stata, and SAS data
-   **rvest** – downloading or scraping data from the web

### Data visualization

-   **ggplot2** – the most widely used visualization system in R
-   **patchwork** – combine multiple ggplots into one figure
-   **ggthemes** – additional themes and styles for ggplot2
-   **plotly** – make interactive plots based on ggplot2

### Data analysis and statistics

-   **lme4** – mixed-effects models
-   **psych** – descriptive statistics and psychometric tools
-   **negligible** – equivalence tests
-   **car** – common regression diagnostics and hypothesis tests
-   **metafor** – meta-analyses
-   **broom** – convert model outputs into tidy data frames

### Simulation

-   **faux** – simulate data for typical experimental designs
-   **simstudy** – flexible framework to simulate data for studies, including complex dependencies
-   **mirt** – simulate item response theory (IRT) data for psychometrics
-   **MASS** – includes functions for statistical methods and simulation for multivariate normal data

### Power analysis

-   **Spower** – conduct simulation based power analyses based on G\*Power
-   **ROCpower** – power analyses for Receiver Operating Characteristic curves
-   **pwr** – traditional analytical power calculations for t-tests, ANOVA, correlations, proportions, etc.

### Reporting and reproducibility

-   **knitr** – knitting R Markdown and Quarto documents
-   **rmarkdown** / **quarto** – reproducible reports and documents
-   **janitor** – cleaning column names and simple frequency tables

These are just a few of the most commonly used packages—R has thousands more, and we will introduce additional packages throughout the book as they become useful.

## Calling functions from a package

If a package is loaded, you can simply call its functions by name:

```{r, message=F}
library(dplyr)

df <- data.frame(
  Name  = c("Alice", "Bob", "Charlie"),
  Age   = c(25, 30, 22),
  Passed = c(TRUE, FALSE, TRUE)
)

df %>% 
  filter(Passed == TRUE)
```

If you want to use a function **without loading the entire package**, you can call it with `::`:

```{r}
dplyr::filter(df, Passed == TRUE)
```

## Getting help for a package

R includes extensive documentation for every package and every function.

### Get help for the whole package:

```{r, eval =F, message =F}
help(package = "dplyr")

```

### Help for a specific function:

```{r, eval = F}
?filter

```

### Search for function names or keywords:

```{r, eval = F}
??"mean"

```

## Summary

In this chapter, we learned how to install and load R packages, explored some of the most commonly used packages for data manipulation, visualization, analysis, and reporting, and learned how to access help and call functions. Packages are a core part of R’s power, and you will continue to encounter and use many more throughout the book. With these tools in hand, you are ready to move on to working with **real datasets** and applying your skills in practical research analyses.
